# 股票情绪分析与趋势洞察工具

一个基于Python的股票情绪分析与趋势洞察工具，使用AkShare获取A股数据，DeepSeek-R1进行金融情感分析，并通过Streamlit提供交互式仪表盘。

## 项目结构

```
stock-sentiment-dashboard/
├── crawlers/              # 数据采集模块
│   ├── __init__.py
│   ├── stock_data.py      # 股票数据爬取（AkShare）
│   └── news_crawler.py    # 新闻数据爬取
├── models/                # 模型模块
│   ├── __init__.py
│   └── sentiment_analysis.py  # 金融情感分析（DeepSeek-R1 API）
├── analysis/              # 分析模块
│   ├── __init__.py
│   ├── stock_sentiment_analysis.py  # 股价-情绪关联分析
│   └── stock_selector.py  # 智能选股器（全市场雷达）
├── dashboard/             # 仪表盘模块
│   ├── __init__.py
│   └── app.py             # Streamlit应用
├── requirements.txt       # 依赖列表
└── README.md             # 项目说明
```

## 核心功能

### 1. 金融数据采集
- 使用AkShare获取A股实时和历史数据
- 支持股票列表缓存（3600秒过期）
- 公司名到股票代码的实体识别
- 反爬虫机制：随机延迟、重试机制
- 错误处理：网络超时、API限流
- 新闻数据爬取与缓存

### 2. 金融语义分析
- 基于DeepSeek-R1 API的情感分析
- 金融特定术语权重调整（如"涨停"+0.8，"跌停"-0.8）
- 垃圾信息过滤（广告、荐股等）
- 批量情感分析支持
- API调用失败时自动降级到模拟逻辑
- JSON格式输出：情感分、逻辑分类、影响逻辑简评

### 3. 量化关联分析
- Pearson相关系数计算（股价涨跌幅 vs 滞后情绪得分）
- 情绪指数计算（移动平均）
- 背离信号识别（顶背离、底背离）
- 极端情绪事件检测
- 统计指标计算

### 4. 智能选股系统
- **全市场雷达**：两阶段筛选策略
  - 初筛：涨幅2%~5%、换手率>3%、价格突破/接近20日均线
  - 精筛：并发舆情分析 + DeepSeek情感打分
  - 漏斗筛选：快速过滤，只对前15只候选股票深度分析
  - 并发处理：10线程并发，单只股票3秒超时
  - 性能优化：目标10秒内完成全市场扫描
- **尾盘扫描**：14:30后自动触发
  - 寻找情绪分持续走高的股票
  - 大单净流入筛选
  - 强势尾盘股识别
- **自动扫描模式**：根据市场时间自动切换策略

### 5. 交互式仪表盘
- 股票选择（下拉框或公司名搜索）
- 日期范围选择
- 分析参数配置（相关性滞后天数、背离窗口大小）
- Plotly K线图与情绪指数双轴展示
- 背离信号可视化标记
- 相关性分析结果展示
- 智能选股功能（全市场扫描、板块扫描）
- 实时进度反馈
- 数据导出功能

## 安装依赖

```bash
pip install -r requirements.txt
```

## 运行应用

```bash
streamlit run dashboard/app.py
```

应用将在浏览器中打开：http://localhost:8501

## 金融术语权重

### 正面术语
- 涨停: +0.8
- 打板: +0.7
- 利好: +0.6
- 超预期: +0.5
- 增持: +0.4
- 回购: +0.4
- 创新高: +0.5
- 业绩增长: +0.6
- 政策支持: +0.5
- 缩量上涨: +0.3
- 底背离: +0.5

### 负面术语
- 跌停: -0.8
- 割韭菜: -0.7
- 利空: -0.6
- 低于预期: -0.5
- 减持: -0.4
- 闪崩: -0.7
- 创新低: -0.5
- 业绩下滑: -0.6
- 政策收紧: -0.5
- 高位放量: -0.6
- 顶背离: -0.5
- 放量下跌: -0.7

## 背离信号说明

### 顶背离
价格创新高，但情绪未创新高。可能预示着股价即将下跌，是卖出信号。

### 底背离
价格创新低，但情绪未创新低。可能预示着股价即将反弹，是买入信号。

## 注意事项

1. 本工具仅供学习研究使用，不构成任何投资建议
2. 情感分析基于模拟新闻数据，实际应用需要接入真实新闻源
3. 股票数据来源于AkShare，请遵守相关网站的使用条款
4. 建议结合其他技术指标和基本面分析进行投资决策

## 技术栈

- Python 3.8+
- Streamlit 1.35.0+
- AkShare 1.10.95+
- OpenAI SDK (用于DeepSeek API)
- Plotly 6.5.0+
- Pandas 2.0.0+
- NumPy 1.24.0+
- Scikit-learn 1.2.0+
- Scipy 1.10.0+
- BeautifulSoup4 (新闻爬取)
- Requests (HTTP请求)
- aiohttp (异步HTTP)

## 许可证

MIT License
